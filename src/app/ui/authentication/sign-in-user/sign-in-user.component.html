

<div class="m-component">
  <div class="title">
    <h3>
      {{ headerTitle }}
    </h3>
    <span routerLink="/auth/sign-in" class="go-back">
      <i class="fa fa-arrow-left" style="margin-right: 8px"></i>
      Vrati se nazad
    </span>
  </div>
  <form class="myForm" (ngSubmit)="onSubmit()"  [formGroup]="signUpForm" *ngIf="!isLoading && !isAccountCreated" >
    <div class="content">

        <!-- Username -->
        <div class="labelLink">
          <label for="username" class="required-label">Korisničko ime</label>
          <input type="text"
                id="username"
                formControlName="username" >
          <div *ngIf="!signUpForm.get('username').valid && signUpForm.get('username').touched ">
            <div class="error" *ngIf="signUpForm.get('username').errors['required']" >
              Morate popuniti ovo polje.
            </div>
          </div>
        </div>

        <!-- PASSWORD I REPEAT_PASSWORD -->
        <div class="formGroup">
          <!-- Password -->
          <div class="labelLink">

            <label for="password" class="required-label">Lozinka</label>
            <input type="password"
                  formControlName="password"
                  id="password" >

            <!-- Displaying errors -->
            <div *ngIf="!signUpForm.get('password').valid && signUpForm.get('password').touched ">
              <div class="error" *ngIf="signUpForm.get('password').errors['required']" >
                Morate popuniti ovo polje.
              </div>
              <div class="error" *ngIf="!signUpForm.get('password').errors['required'] && (signUpForm.get('password').errors['minlength'])" >
                  'Lozinka mora imati najmanje 6 karaktera.
              </div>
              <div class="error" *ngIf="!signUpForm.get('password').errors['required'] &&
                      !signUpForm.get('password').errors['minlength'] && signUpForm.get('password').errors['strong']">
                Lozinka mora sadržati broj, veliko i malo slovo.
              </div>
            </div>

          </div>

          <!-- Repeat password -->
          <div class="labelLink">

            <label for="repeat-password" class="required-label">Ponovite lozinku</label>
            <input type="password"
                  id="repeat-password"
                  formControlName="repeatPassword" >

            <!-- Displaying errors -->
            <div *ngIf="signUpForm.get('repeatPassword').touched && (
                        (signUpForm.errors !== null && !signUpForm.errors['match']) ||
                        !signUpForm.get('repeatPassword').valid )" >

              <div class="error" *ngIf="!signUpForm.get('repeatPassword').valid" >
                Morate popuniti ovo polje.
              </div>
              <div class="error" *ngIf="signUpForm.get('repeatPassword').valid &&
                        signUpForm.errors !== null && !signUpForm.errors['match']" >
                'Lozinke se moraju poklapati.
              </div>
            </div>

          </div>
        </div><!-- End Password container -->

        <!-- Name -->
        <div class="labelLink">

          <label for="name" class="required-label">Ime</label>
          <input type="text"
                id="name"
                formControlName="name">

          <!-- Displayin errors -->
          <div *ngIf="!signUpForm.get('name').valid && signUpForm.get('name').touched ">
            <div class="error" *ngIf="signUpForm.get('name').errors['required']" >
              Morate popuniti ovo polje.
            </div>
          </div>

        </div>

        <!-- Surname -->
        <div class="labelLink">

          <label for="surname" class="required-label">Prezime</label>
          <input type="text"
                id="surname"
                formControlName="surname" >

          <!-- Displayin errors -->
          <div *ngIf="!signUpForm.get('surname').valid && signUpForm.get('surname').touched">
            <div class="error" *ngIf="signUpForm.get('surname').errors['required']" >
              Morate popuniti ovo polje.
            </div>
          </div>

        </div>


        <!-- Contact information -->
        <div class="formGroup">

          <!-- Phone -->
          <div class="labelLink">
            <label for="phone" class="required-label">Telefon</label>
            <input type="text" id="phone"
               [maxLength]="9"
               formControlName="phone"
               (input)="onPhoneInput()">

            <!-- Displayin errors -->
            <div class="error" *ngIf="!signUpForm.get('phone').valid && signUpForm.get('phone').touched ">
                Morate popuniti ovo polje.
            </div>
          </div>

          <!-- Address -->
          <div class="labelLink">
            <label for="address" class="required-label" >Adresa</label>
            <input type="text" id="address" formControlName="address">

            <!-- Displayin errors -->
            <div *ngIf="!signUpForm.get('address').valid && signUpForm.get('address').touched ">
              <div class="error" *ngIf="signUpForm.get('address').errors['required']" >
                Morate popuniti ovo polje.
              </div>
            </div>
          </div>

        </div> <!-- End of contract information -->

    </div>
    <div class="mFooter">
      <button class="bttn bttn-dark bttn-f" [disabled]="!signUpForm.valid" type="submit" >
        Registruj se
        <i class="fas fa-times-circle" *ngIf="!signUpForm.valid" style="color: rgb(255, 145, 145);"></i>
        <i class="far fa-check-circle" *ngIf="signUpForm.valid" style="color: #37f573;"></i>
      </button>
      <div class="error"style="margin-top:15px;text-align:center" *ngIf="errorMessage">
        <div>
          <ul>
            <li *ngFor="let item of errorMessage" > {{ item }}</li>
          </ul>
        </div>
      </div>
    </div>

  </form>
</div>
